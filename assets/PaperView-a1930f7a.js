import{t as T,s as I,D as f,m as z,_ as u,r as m,o as r,a as l,b as i,d as h,e as y,F as w,f as x,p as V,l as k,g as b,h as D,i as U,j,k as q,c as p,q as v}from"./index-a6a66771.js";import{h as M}from"./heading-item-90f63d61.js";const C={props:{title:{type:String,requared:!0},createdAt:{type:String,requared:!0},time:{type:Number,requared:!0},imgUrl:{type:String,requared:!0},imgSize:{type:Object,requared:!0},text:{type:String,requared:!0},tags:{type:Array,requared:!1}},components:{timesetItem:T,socialIcons:I,headingItem:M},computed:{domain(){return f},createdDate(){return new Date(this.createdAt).toGMTString().match(/([A-Za-z]{3}\s\d{2})|(\d{2}:\d{2})/g).join(", ")}},methods:{...z({setSearchTagVuex:"setSearchTag"}),handleClickSetSearchTag(e){this.setSearchTagVuex(e),this.$router.push({name:"main"})}}},N={class:"main-article"},B={class:"main-article__wrapper"},G={class:"main-article__heading-wrapper"},E=["src","width","height"],F={class:"main-article__wrapper-content"},O={class:"main-article__text"},P={class:"main-article__footer"},W={class:"tags"},L=["onClick"],Z={class:"share"},H={class:"share__wrapper"},J=i("span",{class:"share__heading"},"Share on:",-1);function K(e,s,a,S,t,c){const o=m("headingItem"),_=m("timesetItem"),g=m("socialIcons");return r(),l("article",N,[i("div",B,[i("div",G,[h(o,{class:"main-article__heading",title:a.title},null,8,["title"]),h(_,{createdDate:c.createdDate,time:a.time},null,8,["createdDate","time"])]),i("img",{src:`${c.domain+a.imgUrl}`,alt:"",class:"main-article__img",width:a.imgSize.width,height:a.imgSize.height},null,8,E),i("div",F,[i("p",O,y(a.text),1),i("div",P,[i("div",W,[(r(!0),l(w,null,x(a.tags,d=>(r(),l("ul",{class:"tags__column",key:d},[i("li",{class:"tags__item",onClick:n=>c.handleClickSetSearchTag(d)},y(d),9,L)]))),128))]),i("div",Z,[i("div",H,[J,h(g,{class:"main-article__social"})])])])])])])}const Q=u(C,[["render",K]]),X={data(){return{paper:null,recommended:null,similar:null}},props:{id:{type:String,required:!0}},components:{previewArticle:V,mainArticle:Q,loadItem:k},created(){this.getData(),this.getImgSize=b},computed:{...D({deviceTypeVuex:"deviceType",isTablet:"isTablet",isMobile:"isMobile"}),domain(){return f},imgUrl(){return this.paper.img[this.deviceTypeVuex].url},imgSize(){const{width:e,height:s}=this.paper.img[this.deviceTypeVuex];return{width:e,height:s}},imgRecSize(){if(this.recommended.length){const{width:e,height:s}=this.recommended[0].img[this.deviceTypeVuex];return{width:e,height:s}}else return!1},imgSimilarSize(){if(this.similar){const{width:e,height:s}=this.similar.img[this.deviceTypeVuex];return{width:e,height:s}}else return!1},tags(){return this.paper.tags.split(/\s/)},dataIsReady(){return this.paper!==null}},methods:{async getData(){this.paper=await U(this.id),this.recommended=await j(this.id,this.tags);const e=this.recommended.map(s=>s.id);this.similar=await q([this.id,...e],Array.from(this.paper.categories)).then(s=>s[0])}},watch:{async id(){this.paper=this.recommended=this.similar=null,this.getData()}}},Y={key:0,class:"project"},$={class:"project__grid"},R={key:0,class:"recommended project__recommended"},ee={class:"recommended__wrapper"},te=i("span",{class:"recommended__heading"},"Recommended",-1),ie={class:"recommended__articles-wrapper"},se={key:1,class:"similar project__similar"},re={class:"similar__wrapper"},ae=i("span",{class:"similar__heading"},"Similar to",-1);function ce(e,s,a,S,t,c){var d;const o=m("mainArticle"),_=m("previewArticle"),g=m("loadItem");return c.dataIsReady?(r(),l("div",Y,[i("div",$,[h(o,{class:"project__main-paper",title:t.paper.title,text:t.paper.text_article,tags:c.tags,imgUrl:c.imgUrl,imgSize:e.getImgSize(t.paper.img[this.deviceTypeVuex],null,!1,!0),createdAt:t.paper.createdAt,time:t.paper.time_to_read},null,8,["title","text","tags","imgUrl","imgSize","createdAt","time"]),(d=t.recommended)!=null&&d.length?(r(),l("aside",R,[i("div",ee,[te,i("div",ie,[(r(!0),l(w,null,x(t.recommended.slice(0,2),(n,A)=>(r(),p(_,{id:n.id,imgUrl:n.img[this.deviceTypeVuex].url,imgSize:e.getImgSize(this.recommended[A].img[this.deviceTypeVuex],null,!1,!0),header:n.title,text:n.text_preview,time:n.time_to_read,createdAt:n.createdAt,key:n.id},null,8,["id","imgUrl","imgSize","header","text","time","createdAt"]))),128))])])])):v("",!0),t.similar?(r(),l("div",se,[i("div",re,[ae,(r(),p(_,{id:t.similar.id,class:"project__horizontal",imgUrl:t.similar.img[this.deviceTypeVuex].url,imgSize:e.getImgSize(this.similar.img[this.deviceTypeVuex],null,!1,!0),isTablet:e.isTablet,isMobile:e.isMobile,isWideArticleDescription:!e.deviceTypeVuex==="mobile",header:t.similar.title,text:t.similar.text_preview,time:t.similar.time_to_read,createdAt:t.similar.createdAt,key:t.similar.id},null,8,["id","imgUrl","imgSize","isTablet","isMobile","isWideArticleDescription","header","text","time","createdAt"]))])])):v("",!0)])])):(r(),p(g,{key:1}))}const ne=u(X,[["render",ce]]),le={components:{paperGrid:ne}};function me(e,s,a,S,t,c){const o=m("paperGrid");return r(),p(o)}const _e=u(le,[["render",me]]);export{_e as default};
