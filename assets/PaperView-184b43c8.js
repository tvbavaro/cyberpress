import{t as S,s as T,D as A,m as I,_ as u,r as o,o as s,a as n,b as e,d as _,e as y,F as x,f,p as k,l as D,g as b,h as V,i as U,j,c as p,k as v}from"./index-9b247221.js";import{h as M}from"./heading-item-c229fb46.js";const q={props:{title:{type:String,requared:!0},createdAt:{type:String,requared:!0},time:{type:Number,requared:!0},imgUrl:{type:String,requared:!0},text:{type:String,requared:!0},tags:{type:Array,requared:!1}},components:{timesetItem:S,socialIcons:T,headingItem:M},computed:{domain(){return A},createdDate(){return new Date(this.createdAt).toGMTString().match(/([A-Za-z]{3}\s\d{2})|(\d{2}:\d{2})/g).join(", ")}},methods:{...I({setSearchTagVuex:"setSearchTag"}),handleClickSetSearchTag(r){this.setSearchTagVuex(r),this.$router.push({name:"main"})}}},C={class:"main-article"},N={class:"main-article__wrapper"},B={class:"main-article__heading-wrapper"},G=["src"],$={class:"main-article__wrapper-content"},z={class:"main-article__text"},E={class:"main-article__footer"},F={class:"tags"},P=["onClick"],W={class:"share"},L={class:"share__wrapper"},O=e("span",{class:"share__heading"},"Share on:",-1);function Z(r,l,c,g,t,a){const d=o("headingItem"),m=o("timesetItem"),h=o("socialIcons");return s(),n("article",C,[e("div",N,[e("div",B,[_(d,{class:"main-article__heading",title:c.title},null,8,["title"]),_(m,{createdDate:a.createdDate,time:c.time},null,8,["createdDate","time"])]),e("img",{src:`http://${a.domain+c.imgUrl}`,alt:"",class:"main-article__img"},null,8,G),e("div",$,[e("p",z,y(c.text),1),e("div",E,[e("div",F,[(s(!0),n(x,null,f(c.tags,i=>(s(),n("ul",{class:"tags__column",key:i},[e("li",{class:"tags__item",onClick:w=>a.handleClickSetSearchTag(i)},y(i),9,P)]))),128))]),e("div",W,[e("div",L,[O,_(h,{class:"main-article__social"})])])])])])])}const H=u(q,[["render",Z]]),J={data(){return{paper:null,recommended:null,similar:null}},props:{id:{type:String,required:!0}},components:{previewArticle:k,mainArticle:H,loadItem:D},created(){this.getData()},computed:{...b({deviceTypeVuex:"deviceType",isTablet:"isTablet",isMobile:"isMobile"}),domain(){return A},imgUrl(){return this.paper.img[this.deviceTypeVuex]},tags(){return this.paper.tags.split(/\s/)},dataIsReady(){return this.paper!==null}},methods:{async getData(){this.paper=await V(this.id),this.recommended=await U(this.id,this.tags);const r=this.recommended.map(l=>l.id);this.similar=await j([this.id,...r],Array.from(this.paper.categories)).then(l=>l[0])}},watch:{async id(){this.paper=this.recommended=this.similar=null,this.getData()}}},K={key:0,class:"project"},Q={class:"project__grid"},X={key:0,class:"recommended project__recommended"},Y={class:"recommended__wrapper"},R=e("span",{class:"recommended__heading"},"Recommended",-1),ee={class:"recommended__articles-wrapper"},te={key:1,class:"similar project__similar"},ie={class:"similar__wrapper"},se=e("span",{class:"similar__heading"},"Similar to",-1);function re(r,l,c,g,t,a){const d=o("mainArticle"),m=o("previewArticle"),h=o("loadItem");return a.dataIsReady?(s(),n("div",K,[e("div",Q,[_(d,{class:"project__main-paper",title:t.paper.title,text:t.paper.text_article,tags:a.tags,imgUrl:a.imgUrl,createdAt:t.paper.createdAt,time:t.paper.time_to_read},null,8,["title","text","tags","imgUrl","createdAt","time"]),t.recommended?(s(),n("aside",X,[e("div",Y,[R,e("div",ee,[(s(!0),n(x,null,f(t.recommended.slice(0,2),(i,w)=>(s(),p(m,{id:i.id,imgUrl:i.img[this.deviceTypeVuex],header:i.title,text:i.text_preview,time:i.time_to_read,createdAt:i.createdAt,key:i.id},null,8,["id","imgUrl","header","text","time","createdAt"]))),128))])])])):v("",!0),t.similar?(s(),n("div",te,[e("div",ie,[se,(s(),p(m,{id:t.similar.id,class:"project__horizontal",imgUrl:t.similar.img[this.deviceTypeVuex],isTablet:r.isTablet,isMobile:r.isMobile,isWideArticleDescription:!r.deviceTypeVuex==="mobile",header:t.similar.title,text:t.similar.text_preview,time:t.similar.time_to_read,createdAt:t.similar.createdAt,key:t.similar.id},null,8,["id","imgUrl","isTablet","isMobile","isWideArticleDescription","header","text","time","createdAt"]))])])):v("",!0)])])):(s(),p(h,{key:1}))}const ae=u(J,[["render",re]]),ce={components:{paperGrid:ae}};function ne(r,l,c,g,t,a){const d=o("paperGrid");return s(),p(d)}const de=u(ce,[["render",ne]]);export{de as default};
