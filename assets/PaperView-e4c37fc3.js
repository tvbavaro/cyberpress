import{i as _,a as I,b as z,d as V,t as b,s as k,E as x,m as U,_ as v,r as m,o as r,e as l,f as i,g as p,h as y,F as A,j as w,p as j,l as q,k as D,q as N,u as M,v as C,w as B,c as g,x as f}from"./index-35aadbb8.js";import{h as E}from"./heading-item-cf18a184.js";const O={props:{title:{type:String,requared:!0,validator:_},createdAt:{type:String,requared:!0,validator:_},time:{type:Number,requared:!0,validator:I},imgUrl:{type:String,requared:!0,validator:_},imgSize:{type:Object,requared:!0,validator:z},text:{type:String,requared:!0,validator:_},tags:{type:Array,requared:!1,validator:V}},components:{timesetItem:b,socialIcons:k,headingItem:E},computed:{domain(){return x}},methods:{...U({setSearchTagVuex:"setSearchTag"}),handleClickSetSearchTag(e){this.setSearchTagVuex(e),this.$router.push({name:"main"})}}},G={class:"main-article"},P={class:"main-article__wrapper"},F={class:"main-article__heading-wrapper"},W=["src","width","height"],L={class:"main-article__wrapper-content"},H={class:"main-article__text"},J={class:"main-article__footer"},K={class:"tags"},Q=["onClick"],X={class:"share"},Y={class:"share__wrapper"},Z=i("span",{class:"share__heading"},"Share on:",-1);function $(e,s,a,S,t,n){const o=m("headingItem"),h=m("timesetItem"),u=m("socialIcons");return r(),l("article",G,[i("div",P,[i("div",F,[p(o,{class:"main-article__heading",title:a.title},null,8,["title"]),p(h,{createdAt:a.createdAt,time:a.time},null,8,["createdAt","time"])]),i("img",{src:`${n.domain+a.imgUrl}`,alt:"",class:"main-article__img",width:a.imgSize.width,height:a.imgSize.height},null,8,W),i("div",L,[i("p",H,y(a.text),1),i("div",J,[i("div",K,[(r(!0),l(A,null,w(a.tags,d=>(r(),l("ul",{class:"tags__column",key:d},[i("li",{class:"tags__item",onClick:c=>n.handleClickSetSearchTag(d)},y(d),9,Q)]))),128))]),i("div",X,[i("div",Y,[Z,p(u,{class:"main-article__social"})])])])])])])}const R=v(O,[["render",$]]),ee={data(){return{paper:null,recommended:null,similar:null}},props:{id:{type:String,required:!0,validator:_}},components:{previewArticle:j,mainArticle:R,loadItem:q},created(){this.getData(),this.getImgSize=D},computed:{...N({deviceTypeVuex:"deviceType",isTablet:"isTablet",isMobile:"isMobile"}),domain(){return x},imgUrl(){return this.paper.img[this.deviceTypeVuex].url},imgSize(){const{width:e,height:s}=this.paper.img[this.deviceTypeVuex];return{width:e,height:s}},imgRecSize(){if(this.recommended.length){const{width:e,height:s}=this.recommended[0].img[this.deviceTypeVuex];return{width:e,height:s}}else return!1},imgSimilarSize(){if(this.similar){const{width:e,height:s}=this.similar.img[this.deviceTypeVuex];return{width:e,height:s}}else return!1},tags(){return this.paper.tags.split(/\s/)},dataIsReady(){return this.paper!==null}},methods:{async getData(){this.paper=await M(this.id),this.recommended=await C(this.id,this.tags);const e=this.recommended.map(s=>s.id);this.similar=await B([this.id,...e],Array.from(this.paper.categories)).then(s=>s[0])}},watch:{async id(){this.paper=this.recommended=this.similar=null,this.getData()}}},te={key:0,class:"project"},ie={class:"project__grid"},se={key:0,class:"recommended project__recommended"},re={class:"recommended__wrapper"},ae=i("span",{class:"recommended__heading"},"Recommended",-1),ce={class:"recommended__articles-wrapper"},ne={key:1,class:"similar project__similar"},le={class:"similar__wrapper"},me=i("span",{class:"similar__heading"},"Similar to",-1);function de(e,s,a,S,t,n){var d;const o=m("mainArticle"),h=m("previewArticle"),u=m("loadItem");return n.dataIsReady?(r(),l("div",te,[i("div",ie,[p(o,{class:"project__main-paper",title:t.paper.title,text:t.paper.text_article,tags:n.tags,imgUrl:n.imgUrl,imgSize:e.getImgSize(t.paper.img[this.deviceTypeVuex],null,!1,!0),createdAt:t.paper.createdAt,time:t.paper.time_to_read},null,8,["title","text","tags","imgUrl","imgSize","createdAt","time"]),(d=t.recommended)!=null&&d.length?(r(),l("aside",se,[i("div",re,[ae,i("div",ce,[(r(!0),l(A,null,w(t.recommended.slice(0,2),(c,T)=>(r(),g(h,{id:c.id,imgUrl:c.img[this.deviceTypeVuex].url,imgSize:e.getImgSize(this.recommended[T].img[this.deviceTypeVuex],null,!1,!0),header:c.title,text:c.text_preview,time:c.time_to_read,createdAt:c.createdAt,key:c.id},null,8,["id","imgUrl","imgSize","header","text","time","createdAt"]))),128))])])])):f("",!0),t.similar?(r(),l("div",ne,[i("div",le,[me,(r(),g(h,{id:t.similar.id,class:"project__horizontal",imgUrl:t.similar.img[this.deviceTypeVuex].url,imgSize:e.getImgSize(this.similar.img[this.deviceTypeVuex],null,!1,!0),isTablet:e.isTablet,isMobile:e.isMobile,isWideArticleDescription:!e.deviceTypeVuex==="mobile",header:t.similar.title,text:t.similar.text_preview,time:t.similar.time_to_read,createdAt:t.similar.createdAt,key:t.similar.id},null,8,["id","imgUrl","imgSize","isTablet","isMobile","isWideArticleDescription","header","text","time","createdAt"]))])])):f("",!0)])])):(r(),g(u,{key:1}))}const oe=v(ee,[["render",de]]),_e={components:{paperGrid:oe}};function he(e,s,a,S,t,n){const o=m("paperGrid");return r(),g(o)}const ue=v(_e,[["render",he]]);export{ue as default};
